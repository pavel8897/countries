<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<div class="container">
		<ul class="list"></ul>
		<div class="select"></div>
	</div>
</body>
</html>

<style>
	.container {
		display: flex;
  		align-items: baseline;
	}

	ul {
		display: inline-block;
		list-style-type: none;
		margin-right: 20px;
	}

	ul li {
		cursor: pointer;
		margin-bottom: 5px;
	}

	ul li.active {
		color:  red;
	}

	.select {
		position: sticky;
		top: 0;
	}
</style>

<script>

	async function getResponse() {
		let response = await fetch('https://countryapi.io/api/all?apikey=kqhXNILSSIIjj9iHnwKwhVA0UJwcGG7a6xefBptS')
		let content = await response.json()
		
		let key
		let countries = []

		for(key in content) {
			countries.push(content[key].name)
		}
		countries = countries.sort()

		out(content, countries)
	}

	function out(content, arr) {		
		let list = document.querySelector('.list')		
		
		arr.forEach(item => {
			let li = document.createElement('li')
			li.innerHTML = item
			li.addEventListener('click', getElem)
			list.appendChild(li)
		})

		function getElem() {
			let val = this.innerHTML
			let select = document.querySelector('.select')
			let li = document.querySelectorAll('li')
			let borders = []
			let elems = ''
			li.forEach(item => item.classList.remove('active'))
			this.classList.add('active')


			for(let key in content) {
				let obj = content[key]
				if(obj.name === val) {
					if(Array.isArray(obj.borders)) {
						borders = obj.borders						
						for(let key in content) {
							let obj2 = content[key]
							if(borders.includes(obj2.alpha3Code)) {
								elems += `<p>Страна: <a href="">${obj2.name}</a>, Площадь: ${obj2.area}</p>`
							}							
						}
						select.innerHTML = elems
					} else {
						select.innerHTML = 'not border countis!'
					}
				}
			}
		}
	}
	
	getResponse()
	



	/*async function getResponse() {
		let response = await fetch('https://countryapi.io/api/all?apikey=kqhXNILSSIIjj9iHnwKwhVA0UJwcGG7a6xefBptS')
		let content = await response.json()
		
		for(key in content) {
			countries.push(content[key].name)
		}
		
	}*/


</script>






